<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#0d0f1a" />
<title>Gingerbolt</title>
<style>
  :root{
    --bg:#0d0f1a;
    --sun:#ffd27a;
    --pink:#ff5fa2; --pink-hi:#ff7fba;
    --indigo:#5865F2;
    --panel:#0d0f1acc; --panel-strong:#101423e6;
  }

  html,body{margin:0;padding:0;background:var(--bg);color:#e9eef5;height:100%;overflow:hidden;
    font-family:ui-rounded,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}

  /* Buttons */
  button{appearance:none;border:0;border-radius:18px;padding:16px 26px;font-size:20px;font-weight:800;letter-spacing:.3px;cursor:pointer;
    box-shadow:0 8px 24px #00000050;transition:transform .06s ease,box-shadow .2s ease}
  button:active{transform:translateY(1px)}
  .btn-primary{background:linear-gradient(180deg,var(--pink),var(--pink-hi));color:#fff}
  .btn-secondary{background:linear-gradient(180deg,#7289ff,var(--indigo));color:#fff}

  /* Screens */
  .screen{position:absolute;inset:0}
  #home{z-index:3;display:grid;place-items:center}
  #game{z-index:2;display:none;background:#15202b}

  /* Hero background */
  .hero{position:absolute;inset:0;overflow:hidden;
    background:linear-gradient(180deg,#ff7f7f 0%, #ff7a45 35%, #e4572e 60%, #1a1e2a 100%);}
  /* Centre the sun + streaks relative to the viewport */
  .sun, .streaks{position:absolute;left:50%;top:62%;transform:translate(-50%,-50%)}
  .sun{width:clamp(260px,42vw,520px);height:clamp(260px,42vw,520px);border-radius:50%;
    background:radial-gradient(closest-side,var(--sun) 0%,#ffb84a 60%,#ff9a1a 100%);
    box-shadow:0 0 80px 30px #ffb84a44, 0 0 180px 80px #ff9a1a22;}
  .streaks{width:2400px;height:2400px;border-radius:50%;
    background:repeating-conic-gradient(from 0deg, rgba(255,210,122,.45) 0deg 2deg, transparent 2deg 6deg);
    mask-image:radial-gradient(circle at 50% 50%, transparent 0 20%, black 22% 100%);
    -webkit-mask-image:radial-gradient(circle at 50% 50%, transparent 0 20%, black 22% 100%);}

  /* Floating petals */
  .petal{position:absolute;width:10px;height:6px;border-radius:6px;background:#ffb0c9aa;filter:blur(.2px);pointer-events:none}

  /* Centred content */
  .home-wrap{position:relative;z-index:2;display:grid;place-items:center;gap:18px;
    padding:clamp(16px,3vh,24px);text-align:center;max-width:min(92vw,860px)}
  h1{margin:0 0 10px;font-size:clamp(46px,9vw,90px);letter-spacing:2px;line-height:1;
     color:#120c0c;text-shadow:0 4px 0 #ffffff, 0 10px 24px #00000055, 0 0 1px #fff}
  .tag{font-size:clamp(18px,2.6vw,22px);opacity:.95;max-width:820px}
  .actions{display:flex;flex-direction:column;gap:14px;margin-top:6px}
  @media (min-width:800px){ .actions{flex-direction:row} }

  /* Leaderboard docked bottom-right */
  .board{position:absolute;right:16px;bottom:16px;z-index:2;width:min(92vw,420px);
    backdrop-filter:blur(8px);background:linear-gradient(180deg,var(--panel),var(--panel-strong));
    border-radius:18px;padding:14px 16px;box-shadow:0 8px 30px #0008}
  .board h3{margin:0 0 8px;font-size:18px;opacity:.92}
  .board ol{margin:0;padding:0 0 0 18px;max-height:220px;overflow:auto}
  .board li{padding:2px 0;font-variant-numeric:tabular-nums}

  /* Game */
  #canvas{display:block;width:100vw;height:100vh}
  .hud{position:fixed;left:10px;top:14px;z-index:4;text-align:left;font-weight:700;font-size:16px;line-height:1.5;text-shadow:0 2px 4px #000c}
  .hud span{display:block}
  .pause-overlay{position:absolute;inset:0;display:none;align-items:center;justify-content:center;z-index:5;background:#00000066}
  .menu{display:flex;flex-direction:column;gap:12px;align-items:center}
</style>
</head>
<body>

<!-- Home -->
<section id="home" class="screen" aria-label="Home">
  <div class="hero" aria-hidden="true">
    <div class="streaks"></div>
    <div class="sun"></div>
  </div>
  <div id="petals"></div>

  <div class="home-wrap">
    <h1>GINGERBOLT</h1>
    <div class="tag">
      Join Gingerbolt on his electrifying dash to glory. Weave past trees and mud, snag snacks, and charge to unleash anime style bursts. Stay alive, keep your energy up, and chase the top score.
    </div>
    <div class="actions">
      <button class="btn-primary" id="playBtn">Play</button>
      <button class="btn-secondary" id="nameBtn">Change Name</button>
    </div>
  </div>

  <aside class="board" id="board">
    <h3>Top scores</h3>
    <ol id="scoreList"></ol>
  </aside>
</section>

<!-- Game -->
<section id="game" class="screen" aria-label="Game">
  <canvas id="canvas"></canvas>
  <div class="hud" id="hud">
    <span id="hScore">Score: 0</span>
    <span id="hEnergy">Energy: 100</span>
    <span id="hSnacks">Snacks: 0</span>
  </div>
  <div class="pause-overlay" id="pause">
    <div class="menu">
      <button class="btn-primary" id="resumeBtn">Resume</button>
      <button class="btn-secondary" id="quitBtn">Quit</button>
    </div>
  </div>
</section>

<script>
/* -------- Player name + scores -------- */
const NAME_KEY='gingerbolt_name', SCORES_KEY='gingerbolt_scores';
function getName(){ return localStorage.getItem(NAME_KEY) || 'CAT'; }
function setName(n){ localStorage.setItem(NAME_KEY,(n||'').trim()||'CAT'); }
function getScores(){ try{return JSON.parse(localStorage.getItem(SCORES_KEY))||[];}catch{return[];} }
function saveScore(name,score){ const a=getScores(); a.push({name,score,t:Date.now()}); a.sort((x,y)=>y.score-x.score); localStorage.setItem(SCORES_KEY,JSON.stringify(a.slice(0,20))); }
function drawBoard(){
  const list=document.getElementById('scoreList'), arr=getScores();
  list.innerHTML = arr.length? arr.map((s,i)=>`<li><span>${i+1}. ${s.name}</span> <span style="float:right">${s.score}</span></li>`).join('') : '<li>Be the first to set a score</li>';
}

/* -------- Petals on home -------- */
function spawnPetals(){
  const holder=document.getElementById('petals'); holder.innerHTML='';
  const count=24;
  for(let i=0;i<count;i++){
    const p=document.createElement('div'); p.className='petal';
    const startX=Math.random()*100, delay=Math.random()*6, dur=10+Math.random()*10, size=6+Math.random()*10;
    p.style.left=startX+'vw'; p.style.top='-20px'; p.style.width=size+'px'; p.style.height=size*0.6+'px';
    p.style.animation=`fall ${dur}s linear ${delay}s infinite`; holder.appendChild(p);
  }
}
const styleFall=document.createElement('style');
styleFall.textContent=`@keyframes fall{
  0%{transform:translate3d(0,-40px,0) rotate(0deg);opacity:0}
  10%{opacity:.9}
  100%{transform:translate3d(${(Math.random()>.5?'-':'')+60}vw,105vh,0) rotate(540deg);opacity:.2}
}`; document.head.appendChild(styleFall);

/* -------- Lightweight runner -------- */
const home=document.getElementById('home'), game=document.getElementById('game');
const canvas=document.getElementById('canvas'), ctx=canvas.getContext('2d',{alpha:false});
let W=0,H=0,px=0,py=0,lane=1,lanes=[0,0,0],t=0,speed=3;
let obstacles=[],snacks=[],running=false,score=0,energy=100,snackCount=0;

function resize(){ canvas.width=W=innerWidth; canvas.height=H=innerHeight;
  const gap=Math.min(120,W/6), centre=W/2; lanes=[centre-gap,centre,centre+gap]; px=lanes[lane]; py=H*0.72; }
addEventListener('resize',resize,{passive:true});

function resetGame(){ lane=1; resize(); obstacles=[]; snacks=[]; t=0; speed=3; score=0; energy=100; snackCount=0; }
function rnd(a,b){ return a+Math.random()*(b-a); }
function spawnRow(){ const L=Math.floor(rnd(0,3)); obstacles.push({x:lanes[L],y:-60}); if(Math.random()<0.55){ const S=(L+1)%3; snacks.push({x:lanes[S],y:-120}); } }

function drawTrack(){
  ctx.fillStyle='#2b6d2d'; ctx.fillRect(0,0,W,H);
  for(let i=0;i<3;i++){ ctx.fillStyle=i%2?'#6b4b35':'#7a553d'; ctx.fillRect(lanes[i]-50,0,100,H); }
  t+=0.01; for(let i=0;i<16;i++){ const y=(t*60+i*H/16)%H, x=(i*W/16+Math.sin(t+i)*40)%W;
    ctx.fillStyle='rgba(255,176,201,.65)'; ctx.beginPath(); ctx.ellipse(x,y,5,3,t+i,0,Math.PI*2); ctx.fill(); }
}
function drawCat(){
  ctx.save(); ctx.translate(px,py); ctx.shadowColor='#0006'; ctx.shadowBlur=8; ctx.shadowOffsetY=2;
  ctx.fillStyle='#a85a1f'; ctx.beginPath(); ctx.ellipse(-28,10,26,8,.2,0,Math.PI*2); ctx.fill();
  ctx.fillStyle='#c46a24'; ctx.beginPath(); ctx.ellipse(0,0,26,40,0,0,Math.PI*2); ctx.fill();
  ctx.fillStyle='#a85a1f'; ctx.beginPath(); ctx.ellipse(0,6,14,20,0,0,Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.ellipse(0,-38,18,14,0,0,Math.PI*2); ctx.fill();
  ctx.fillStyle='#8c4a1b'; ctx.beginPath(); ctx.moveTo(-12,-48); ctx.lineTo(-4,-58); ctx.lineTo(-2,-42); ctx.fill();
  ctx.beginPath(); ctx.moveTo(12,-48); ctx.lineTo(4,-58); ctx.lineTo(2,-42); ctx.fill();
  ctx.fillStyle='#fff'; ctx.beginPath(); ctx.arc(-6,-40,3,0,Math.PI*2); ctx.arc(6,-40,3,0,Math.PI*2); ctx.fill();
  ctx.fillStyle='#000'; ctx.beginPath(); ctx.arc(-6,-40,1.5,0,Math.PI*2); ctx.arc(6,-40,1.5,0,Math.PI*2); ctx.fill();
  ctx.strokeStyle='#fff'; ctx.lineWidth=2;
  for(let i=0;i<3;i++){ ctx.beginPath(); ctx.moveTo(-2,-36+i*3); ctx.lineTo(-18,-30+i*3); ctx.stroke(); }
  for(let i=0;i<3;i++){ ctx.beginPath(); ctx.moveTo(2,-36+i*3); ctx.lineTo(18,-30+i*3); ctx.stroke(); }
  ctx.restore();
}
function rectHit(ax,ay,aw,ah,bx,by,bw,bh){ return Math.abs(ax-bx)<(aw+bw)*.5 && Math.abs(ay-by)<(ah+bh)*.5; }
function loop(){
  if(!running) return; requestAnimationFrame(loop);
  drawTrack();
  if(Math.random()<0.03) spawnRow();
  ctx.fillStyle='#3b2a1d'; obstacles.forEach(o=>{o.y+=speed; ctx.fillRect(o.x-26,o.y-20,52,40);});
  ctx.fillStyle='#ffd27a'; snacks.forEach(s=>{s.y+=speed; ctx.beginPath(); ctx.arc(s.x,s.y,10,0,Math.PI*2); ctx.fill();});
  obstacles=obstacles.filter(o=>{ if(rectHit(px,py,40,60,o.x,o.y,52,40)){ energy-=25; o.remove=true; } return !o.remove && o.y<H+60; });
  snacks=snacks.filter(s=>{ if(rectHit(px,py,40,60,s.x,s.y,20,20)){ energy=Math.min(100,energy+20); snackCount++; score+=50; s.remove=true; } return !s.remove && s.y<H+40; });
  drawCat(); score+=Math.floor(speed); energy-=0.04*speed; if(energy<=0){ endGame(); return; }
  speed=Math.min(9,speed+0.002);
  document.getElementById('hScore').textContent='Score: '+score;
  document.getElementById('hEnergy').textContent='Energy: '+Math.max(0,energy|0);
  document.getElementById('hSnacks').textContent='Snacks: '+snackCount;
}

/* Controls */
function toLaneFromX(x){ const d0=Math.abs(x-lanes[0]), d1=Math.abs(x-lanes[1]), d2=Math.abs(x-lanes[2]); const m=Math.min(d0,d1,d2); return m===d0?0:m===d1?1:2; }
canvas.addEventListener('pointerdown',e=>{ lane=toLaneFromX(e.clientX); px=lanes[lane]; });
canvas.addEventListener('pointermove',e=>{ if(e.pressure>0){ lane=toLaneFromX(e.clientX); px=lanes[lane]; }});
addEventListener('keydown',e=>{ if(e.key==='ArrowLeft') lane=Math.max(0,lane-1); if(e.key==='ArrowRight') lane=Math.min(2,lane+1); px=lanes[lane]; if(e.key==='Escape') togglePause(); });

/* Flow */
function showHome(){ game.style.display='none'; home.style.display='grid'; drawBoard(); }
function showGame(){ home.style.display='none'; game.style.display='grid'; resetGame(); running=true; loop(); }
function endGame(){ running=false; saveScore(getName(),score); drawBoard(); showHome(); }
function togglePause(){ const p=document.getElementById('pause'); if(!running) return; if(p.style.display==='flex'){ p.style.display='none'; running=true; loop(); } else { p.style.display='flex'; running=false; } }

/* Buttons */
document.getElementById('playBtn').onclick=showGame;
document.getElementById('nameBtn').onclick=()=>{ const n=prompt('Enter your player name',getName()); if(n!==null) setName(n); };
document.getElementById('resumeBtn').onclick=togglePause;
document.getElementById('quitBtn').onclick=()=>{ running=false; showHome(); };

/* Init */
setName(getName()); spawnPetals(); drawBoard(); resize(); showHome();
</script>
</body>
</html>
